<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <title>Chatbot Gemini 2.5 Flash</title>
    <style>
        .chat-container { max-width: 600px; margin: 50px auto; padding: 20px; border: 1px solid #ddd; border-radius: 8px; }
        #output { border: 1px solid #ccc; padding: 10px; min-height: 100px; margin-top: 15px; background-color: #f9f9f9; white-space: pre-wrap; }
        button:disabled { background-color: #aaa; }
    </style>
</head>
<body>

    <div class="chat-container">
        <h1>Gemini 2.5 Flash Chat</h1>
        <textarea id="prompt-input" rows="4" style="width: 100%;" placeholder="Tanyakan apa saja..."></textarea>
        <button id="send-btn" onclick="askGemini()">Kirim</button>
        
        <h2>Respons:</h2>
        <div id="output">Hasil akan muncul di sini.</div>
        <p id="loading" style="display:none; color: blue;">Memproses...</p>
    </div>

   <script>
        // GANTI DENGAN WEB APP URL ANDA DARI LANGKAH 2
        const GEMINI_ENDPOINT = 'https://script.google.com/macros/s/AKfycbzYHDHtnkDvLr8G5Fv2xpG4j9r5-Lw1USw_-1pYWTvn3z1L76ce48Pj1FtAZ7tyozuUug/exec'; 

        async function askGemini() {
            const prompt = document.getElementById('prompt-input').value;
            const output = document.getElementById('output');
            const loading = document.getElementById('loading');
            const sendBtn = document.getElementById('send-btn');
            
            if (!prompt.trim()) return;

            // Tampilkan loading dan nonaktifkan tombol
            output.innerText = '';
            loading.style.display = 'block';
            sendBtn.disabled = true;

            try {
                const response = await fetch(GEMINI_ENDPOINT, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json' // Harus JSON untuk membaca di Apps Script
                    },
                    body: JSON.stringify({ prompt: prompt }) 
                });

                const data = await response.json();

                if (data.text) {
                    output.innerText = data.text;
                } else if (data.error) {
                    output.innerText = 'Error: ' + data.error;
                }

            } catch (error) {
                output.innerText = 'Terjadi kesalahan jaringan.';
            } finally {
                loading.style.display = 'none';
                sendBtn.disabled = false;
            }
        }
    </script>
</body>
</html>
